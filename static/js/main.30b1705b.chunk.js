(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{206:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(68),i=a.n(r),s=(a(179),a(31)),l=a(61),o=a(22),d=a(62),j=a.n(d),b=a(103),u=a(14),h=a(218),p=a(229),O=a(224),x=a(219),m="http://localhost:3001/api";console.log(m,"backendURL?");var v,f,g,y=a(92),k=a(15),C=function(e){return{type:"SET_PATIENT",payload:e}},D=a(2),H={patients:{},patient:null,diagnoses:[]},S=Object(n.createContext)([H,function(){return H}]),T=function(e){var t=e.reducer,a=e.children,c=Object(n.useReducer)(t,H),r=Object(o.a)(c,2),i=r[0],s=r[1];return Object(D.jsx)(S.Provider,{value:[i,s],children:a})},w=function(){return Object(n.useContext)(S)},N=a(217),E=a(223),L=a(222),R=a(227),Y=a(226),A=a(10),F=a(221),I=a(220),M=function(e){var t=e.name,a=e.label,n=e.options;return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:a}),Object(D.jsx)(A.b,{as:"select",name:t,className:"ui dropdown",children:n.map((function(e){return Object(D.jsx)("option",{value:e.value,children:e.label||e.value},e.value)}))})]})},_=function(e){var t=e.field,a=e.label,n=e.placeholder;return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:a}),Object(D.jsx)(A.b,Object(k.a)({placeholder:n},t)),Object(D.jsx)("div",{style:{color:"red"},children:Object(D.jsx)(A.a,{name:t.name})})]})},P=function(e){var t=e.field,a=e.label,n=e.min,c=e.max;return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:a}),Object(D.jsx)(A.b,Object(k.a)(Object(k.a)({},t),{},{type:"number",min:n,max:c})),Object(D.jsx)("div",{style:{color:"red"},children:Object(D.jsx)(A.a,{name:t.name})})]})},B=function(e){var t=e.diagnoses,a=e.setFieldValue,n=e.setFieldTouched,c="diagnosisCodes",r=t.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return Object(D.jsxs)(F.a.Field,{children:[Object(D.jsx)("label",{children:"Diagnoses"}),Object(D.jsx)(I.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:r,onChange:function(e,t){n(c,!0),a(c,t.value)}}),Object(D.jsx)(A.a,{name:c})]})};!function(e){e.Male="male",e.Female="female",e.Other="other"}(v||(v={})),function(e){e.Hospital="Hospital",e.OccupationalHealthcare="OccupationalHealthcare",e.HealthCheck="HealthCheck"}(f||(f={})),function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(g||(g={}));var V=[{value:v.Male,label:"Male"},{value:v.Female,label:"Female"},{value:v.Other,label:"Other"}],G=function(e){var t=e.onSubmit,a=e.onCancel;return Object(D.jsx)(A.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:v.Other},onSubmit:t,validate:function(e){var t="Field is required",a={};return e.name||(a.name=t),e.ssn||(a.ssn=t),e.dateOfBirth||(a.dateOfBirth=t),e.occupation||(a.occupation=t),a},children:function(e){var t=e.isValid,n=e.dirty;return Object(D.jsxs)(A.c,{className:"form ui",children:[Object(D.jsx)(A.b,{label:"Name",placeholder:"Name",name:"name",component:_}),Object(D.jsx)(A.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:_}),Object(D.jsx)(A.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:_}),Object(D.jsx)(A.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:_}),Object(D.jsx)(M,{label:"Gender",name:"gender",options:V}),Object(D.jsxs)(Y.a,{children:[Object(D.jsx)(Y.a.Column,{floated:"left",width:5,children:Object(D.jsx)(O.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(D.jsx)(Y.a.Column,{floated:"right",width:5,children:Object(D.jsx)(O.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},U=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(D.jsxs)(L.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(D.jsx)(L.a.Header,{children:"Add a new patient"}),Object(D.jsxs)(L.a.Content,{children:[c&&Object(D.jsx)(R.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(D.jsx)(G,{onSubmit:n,onCancel:a})]})]})},q=a(228),J=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],z=function(e){var t=e.rating,a=e.showText;return Object(D.jsxs)("div",{className:"health-bar",children:[Object(D.jsx)(q.a,{icon:"heart",disabled:!0,rating:4-t,maxRating:4}),a?Object(D.jsx)("p",{children:J[t]}):null]})},K=function(e){var t=e.isLoading,a=w(),n=Object(o.a)(a,2),r=n[0].patients,i=n[1],d=c.a.useState(!1),u=Object(o.a)(d,2),p=u[0],x=u[1],v=c.a.useState(),f=Object(o.a)(v,2),g=f[0],y=f[1],k=function(){x(!1),y(void 0)},C=function(){var e=Object(l.a)(Object(s.a)().mark((function e(t){var a,n,c,r,l;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("".concat(m,"/patients"),t);case 3:a=e.sent,n=a.data,i({type:"ADD_PATIENT",payload:n}),k(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(c=e.t0.response)||void 0===c?void 0:c.data)||"Unknown Error"),y((null===(r=e.t0.response)||void 0===r||null===(l=r.data)||void 0===l?void 0:l.error)||"Unknown error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(D.jsx)(N.a,{active:!0,inline:"centered"}):Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(h.a,{textAlign:"center",children:Object(D.jsx)("h3",{children:"Patient list"})}),Object(D.jsxs)(E.a,{celled:!0,children:[Object(D.jsx)(E.a.Header,{children:Object(D.jsxs)(E.a.Row,{children:[Object(D.jsx)(E.a.HeaderCell,{children:"Name"}),Object(D.jsx)(E.a.HeaderCell,{children:"Gender"}),Object(D.jsx)(E.a.HeaderCell,{children:"Occupation"}),Object(D.jsx)(E.a.HeaderCell,{children:"Health Rating"})]})}),Object(D.jsx)(E.a.Body,{children:Object.values(r).map((function(e){return Object(D.jsxs)(E.a.Row,{children:[Object(D.jsx)(E.a.Cell,{children:Object(D.jsx)(b.b,{to:"/patients/".concat(e.id),children:e.name})}),Object(D.jsx)(E.a.Cell,{children:e.gender}),Object(D.jsx)(E.a.Cell,{children:e.occupation}),Object(D.jsx)(E.a.Cell,{children:Object(D.jsx)(z,{showText:!1,rating:1})})]},e.id)}))})]}),Object(D.jsx)(U,{modalOpen:p,onSubmit:C,error:g,onClose:k}),Object(D.jsx)(O.a,{onClick:function(){return x(!0)},children:"Add New Patient"})]})},Q=a(96),W=function(e,t){return Object.values(t).filter((function(t){return t.code===e}))[0].name+" "},X=function(e){var t=e.entry,a=e.diagnoses;return Object(D.jsxs)("div",{className:"ui segment",children:[Object(D.jsxs)("h2",{children:[t.date," ",Object(D.jsx)(Q.a,{name:"hospital"})]}),Object(D.jsx)("em",{style:{color:"grey"},children:t.description}),t.diagnosisCodes&&t.diagnosisCodes.length>0&&Object(D.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(D.jsx)("strong",{children:"Diagnoses:"}),Object(D.jsx)("div",{className:"ui bulleted list",children:Object.keys(a).length>0&&t.diagnosisCodes.map((function(e){return Object(D.jsx)("div",{className:"item",children:W(e,a)},e)}))})]}),Object(D.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("strong",{children:"Discharge Date:"}),Object(D.jsxs)("span",{children:[" ",t.discharge.date]})]}),Object(D.jsxs)("div",{children:[Object(D.jsx)("strong",{children:"Discharge Criteria:"}),Object(D.jsxs)("span",{children:[" ",t.discharge.criteria]})]})]})]},t.id)},Z=function(e){var t=e.entry;return Object(D.jsxs)("div",{className:"ui segment",children:[Object(D.jsxs)("h2",{children:[t.date," ",Object(D.jsx)(Q.a,{name:"stethoscope"})]}),Object(D.jsx)("em",{style:{color:"grey"},children:t.description}),Object(D.jsx)("p",{style:{paddingTop:"5px"},children:Object(D.jsx)(Q.a,{name:"heart",color:function(){switch(t.healthCheckRating){case g.Healthy:return"green";case g.LowRisk:return"yellow";case g.HighRisk:return"orange";default:return"red"}}()})})]},t.id)},$=function(e){var t,a,n=e.entry,c=e.diagnoses;return Object(D.jsxs)("div",{className:"ui segment",children:[Object(D.jsxs)("h2",{children:[n.date," ",Object(D.jsx)(Q.a,{name:"building"})]}),Object(D.jsx)("em",{style:{color:"grey"},children:n.description}),n.diagnosisCodes&&n.diagnosisCodes.length>0&&Object(D.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(D.jsx)("strong",{children:"Diagnoses:"}),Object(D.jsx)("div",{className:"ui bulleted list",children:Object.keys(c).length>0&&n.diagnosisCodes.map((function(e){return Object(D.jsx)("div",{className:"item",children:W(e,c)},e)}))})]}),(null===(t=n.sickLeave)||void 0===t?void 0:t.startDate)&&Object(D.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(D.jsx)("strong",{children:"Sick leave:"}),Object(D.jsxs)("span",{children:[" ",null===(a=n.sickLeave)||void 0===a?void 0:a.startDate," to ",n.sickLeave.endDate]})]})]},n.id)},ee=function(e){var t=e.entry,a=w(),n=Object(o.a)(a,1)[0].diagnoses;switch(t.type){case"Hospital":return Object(D.jsx)(X,{entry:t,diagnoses:n});case"OccupationalHealthcare":return Object(D.jsx)($,{entry:t,diagnoses:n});case"HealthCheck":return Object(D.jsx)(Z,{entry:t});default:return null}},te=[{value:f.Hospital,label:"Hospital"},{value:f.HealthCheck,label:"Health Check"},{value:f.OccupationalHealthcare,label:"Occupational Healthcare"}],ae=function(e){return"string"===typeof e||e instanceof String},ne=function(e){var t=e.onSubmit,a=e.onCancel,n=w(),c=Object(o.a)(n,1)[0].diagnoses;return Object(D.jsx)(A.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],discharge:{date:"",criteria:""},sickLeave:{startDate:"",endDate:""},employerName:"",healthCheckRating:0,type:f.Hospital},onSubmit:t,validate:function(e){var t,a="Field is required",n="Formatted incorrectly",c={};return e.description||(c.description=a),e.date||(c.date=a),e.specialist||(c.specialist=a),"string"!==typeof e.description&&(c.description=n),"string"!==typeof e.date&&(c.date=n),"string"!==typeof e.specialist&&(c.specialist=n),e.type!==f.Hospital||e.discharge.date&&e.discharge.criteria||(c.discharge=a),e.type!==f.OccupationalHealthcare||ae(e.sickLeave.startDate)&&ae(e.sickLeave.endDate)||(c.sickLeave=n),e.type!==f.OccupationalHealthcare||ae(e.employerName)||(c.sickLeave=n),e.type===f.HealthCheck&&null===e.healthCheckRating&&(c.healthCheckRating=a),e.type===f.HealthCheck&&(t=e.healthCheckRating,"number"!==typeof Number(t))&&(c.healthCheckRating=n),c},children:function(e){var t=e.isValid,n=e.dirty,r=e.setFieldValue,i=e.setFieldTouched,s=e.values;return Object(D.jsxs)(A.c,{className:"form ui",children:[Object(D.jsx)(M,{label:"Entry Type",name:"type",options:te}),Object(D.jsx)(A.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:_}),Object(D.jsx)(A.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:_}),Object(D.jsx)(A.b,{label:"Description",placeholder:"Description",name:"description",component:_}),Object(D.jsx)(B,{setFieldValue:r,setFieldTouched:i,diagnoses:Object.values(c)}),s.type===f.Hospital&&Object(D.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(D.jsx)(A.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:_}),Object(D.jsx)(A.b,{label:"Discharge Criteria",placeholder:"Criteria",name:"discharge.criteria",component:_})]}),s.type===f.OccupationalHealthcare&&Object(D.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(D.jsx)(A.b,{label:"Sick Leave Start Date",placeholder:"YYYY-MM-DD",name:"sickLeave.startDate",component:_}),Object(D.jsx)(A.b,{label:"Sick Leave End Date",placeholder:"YYYY-MM-DD",name:"sickLeave.endDate",component:_}),Object(D.jsx)(A.b,{label:"Employer Name",placeholder:"Employer",name:"employerName",component:_})]}),s.type===f.HealthCheck&&Object(D.jsx)(A.b,{label:"Health Check Rating",name:"healthCheckRating",component:P,min:0,max:3}),Object(D.jsxs)(Y.a,{children:[Object(D.jsx)(Y.a.Column,{floated:"left",width:5,children:Object(D.jsx)(O.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(D.jsx)(Y.a.Column,{floated:"right",width:5,children:Object(D.jsx)(O.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},ce=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(D.jsxs)(L.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(D.jsx)(L.a.Header,{children:"Add a new Entry"}),Object(D.jsxs)(L.a.Content,{children:[c&&Object(D.jsx)(R.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(D.jsx)(ne,{onSubmit:n,onCancel:a})]})]})},re=function(){var e=w(),t=Object(o.a)(e,2),a=t[0].patient,n=t[1],r=c.a.useState(!1),i=Object(o.a)(r,2),d=i[0],b=i[1],h=function(){b(!1)},p=Object(u.f)().id;c.a.useEffect((function(){var e=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var t,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("".concat(m,"/patients/").concat(p));case 3:t=e.sent,a=t.data,n(C(a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[n]);var x=function(){var e=Object(l.a)(Object(s.a)().mark((function e(t){var a,c,r;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.post("".concat(m,"/patients/").concat(p,"/entries"),t);case 3:a=e.sent,c=a.data,n(C(c)),h(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(r=e.t0.response)||void 0===r?void 0:r.data)||"Unknown Error");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return a?Object(D.jsxs)("div",{className:"Patient-Details",children:[Object(D.jsxs)("h2",{children:[a.name," ",Object(D.jsx)(Q.a,{name:function(){switch(null===a||void 0===a?void 0:a.gender){case"male":return"mars";case"female":return"venus";default:return"genderless"}}()})]}),Object(D.jsxs)("p",{children:["ssn: ",a.ssn]}),Object(D.jsxs)("p",{children:["occupation: ",null===a||void 0===a?void 0:a.occupation]}),Object(D.jsx)(O.a,{onClick:function(){return b(!0)},children:"Add New Entry"}),a.entries.length>0&&Object(D.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(D.jsx)("h3",{children:"entries"}),a.entries.map((function(e){return Object(D.jsx)(ee,{entry:e},e.id)}))]}),Object(D.jsx)(ce,{modalOpen:d,onSubmit:x,onClose:h})]}):null},ie=function(){var e=w(),t=Object(o.a)(e,2)[1],a=c.a.useState(!1),n=Object(o.a)(a,2),r=n[0],i=n[1];return c.a.useEffect((function(){var e=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var a,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,e.next=4,j.a.get("".concat(m,"/patients"));case 4:a=e.sent,n=a.data,t({type:"SET_PATIENT_LIST",payload:n}),i(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),c.a.useEffect((function(){var e=function(){var e=Object(l.a)(Object(s.a)().mark((function e(){var a,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.a.get("".concat(m,"/diagnoses"));case 3:a=e.sent,n=a.data,t({type:"SET_DIAGNOSES_LIST",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(b.a,{children:Object(D.jsxs)(h.a,{children:[Object(D.jsx)(p.a,{as:"h1",children:"Patientor"}),Object(D.jsx)(O.a,{as:b.b,to:"/",primary:!0,children:"Home"}),Object(D.jsx)(x.a,{hidden:!0}),Object(D.jsxs)(u.c,{children:[Object(D.jsx)(u.a,{path:"/patients/:id",children:Object(D.jsx)(re,{})}),Object(D.jsx)(u.a,{path:"/",children:Object(D.jsx)(K,{isLoading:r})})]})]})})})};i.a.render(Object(D.jsx)(T,{reducer:function(e,t){switch(t.type){case"SET_PATIENT_LIST":return Object(k.a)(Object(k.a)({},e),{},{patients:Object(k.a)(Object(k.a)({},t.payload.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(y.a)({},t.id,t))}),{})),e.patients)});case"ADD_PATIENT":return Object(k.a)(Object(k.a)({},e),{},{patients:Object(k.a)(Object(k.a)({},e.patients),{},Object(y.a)({},t.payload.id,t.payload))});case"SET_PATIENT":return Object(k.a)(Object(k.a)({},e),{},{patient:t.payload});case"SET_DIAGNOSES_LIST":return Object(k.a)(Object(k.a)({},e),{},{diagnoses:Object(k.a)(Object(k.a)({},t.payload.reduce((function(e,t){return Object(k.a)(Object(k.a)({},e),{},Object(y.a)({},t.code,t))}),{})),e.diagnoses)});default:return e}},children:Object(D.jsx)(ie,{})}),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.30b1705b.chunk.js.map