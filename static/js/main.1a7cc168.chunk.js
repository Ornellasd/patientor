(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{206:function(e,t,a){"use strict";a.r(t);var n,c,r,i=a(0),s=a.n(i),l=a(68),o=a.n(l),d=(a(179),a(31)),j=a(62),b=a(22),u=a(45),h=a.n(u),O=a(103),p=a(14),x=a(218),m=a(229),v=a(224),f=a(219),g=a(92),y=a(15),C=function(e){return{type:"SET_PATIENT",payload:e}},S=a(2),k={patients:{},patient:null,diagnoses:[]},T=Object(i.createContext)([k,function(){return k}]),D=function(e){var t=e.reducer,a=e.children,n=Object(i.useReducer)(t,k),c=Object(b.a)(n,2),r=c[0],s=c[1];return Object(S.jsx)(T.Provider,{value:[r,s],children:a})},E=function(){return Object(i.useContext)(T)},H=a(217),_=a(223),N=a(222),R=a(227),w=a(226),A=a(10),L=a(221),P=a(220),F=function(e){var t=e.name,a=e.label,n=e.options;return Object(S.jsxs)(L.a.Field,{children:[Object(S.jsx)("label",{children:a}),Object(S.jsx)(A.b,{as:"select",name:t,className:"ui dropdown",children:n.map((function(e){return Object(S.jsx)("option",{value:e.value,children:e.label||e.value},e.value)}))})]})},Y=function(e){var t=e.field,a=e.label,n=e.placeholder;return Object(S.jsxs)(L.a.Field,{children:[Object(S.jsx)("label",{children:a}),Object(S.jsx)(A.b,Object(y.a)({placeholder:n},t)),Object(S.jsx)("div",{style:{color:"red"},children:Object(S.jsx)(A.a,{name:t.name})})]})},I=function(e){var t=e.field,a=e.label,n=e.min,c=e.max;return Object(S.jsxs)(L.a.Field,{children:[Object(S.jsx)("label",{children:a}),Object(S.jsx)(A.b,Object(y.a)(Object(y.a)({},t),{},{type:"number",min:n,max:c})),Object(S.jsx)("div",{style:{color:"red"},children:Object(S.jsx)(A.a,{name:t.name})})]})},B=function(e){var t=e.diagnoses,a=e.setFieldValue,n=e.setFieldTouched,c="diagnosisCodes",r=t.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return Object(S.jsxs)(L.a.Field,{children:[Object(S.jsx)("label",{children:"Diagnoses"}),Object(S.jsx)(P.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:r,onChange:function(e,t){n(c,!0),a(c,t.value)}}),Object(S.jsx)(A.a,{name:c})]})};!function(e){e.Male="male",e.Female="female",e.Other="other"}(n||(n={})),function(e){e.Hospital="Hospital",e.OccupationalHealthcare="OccupationalHealthcare",e.HealthCheck="HealthCheck"}(c||(c={})),function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(r||(r={}));var M=[{value:n.Male,label:"Male"},{value:n.Female,label:"Female"},{value:n.Other,label:"Other"}],K=function(e){var t=e.onSubmit,a=e.onCancel;return Object(S.jsx)(A.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:n.Other},onSubmit:t,validate:function(e){var t="Field is required",a={};return e.name||(a.name=t),e.ssn||(a.ssn=t),e.dateOfBirth||(a.dateOfBirth=t),e.occupation||(a.occupation=t),a},children:function(e){var t=e.isValid,n=e.dirty;return Object(S.jsxs)(A.c,{className:"form ui",children:[Object(S.jsx)(A.b,{label:"Name",placeholder:"Name",name:"name",component:Y}),Object(S.jsx)(A.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:Y}),Object(S.jsx)(A.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:Y}),Object(S.jsx)(A.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:Y}),Object(S.jsx)(F,{label:"Gender",name:"gender",options:M}),Object(S.jsxs)(w.a,{children:[Object(S.jsx)(w.a.Column,{floated:"left",width:5,children:Object(S.jsx)(v.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(S.jsx)(w.a.Column,{floated:"right",width:5,children:Object(S.jsx)(v.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},U=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(S.jsxs)(N.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(S.jsx)(N.a.Header,{children:"Add a new patient"}),Object(S.jsxs)(N.a.Content,{children:[c&&Object(S.jsx)(R.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(S.jsx)(K,{onSubmit:n,onCancel:a})]})]})},V=a(228),W=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],G=function(e){var t=e.rating,a=e.showText;return Object(S.jsxs)("div",{className:"health-bar",children:[Object(S.jsx)(V.a,{icon:"heart",disabled:!0,rating:4-t,maxRating:4}),a?Object(S.jsx)("p",{children:W[t]}):null]})},q=function(e){var t=e.isLoading,a=Object({NODE_ENV:"production",PUBLIC_URL:"/patientor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL||"",n=E(),c=Object(b.a)(n,2),r=c[0].patients,i=c[1],l=s.a.useState(!1),o=Object(b.a)(l,2),u=o[0],p=o[1],m=s.a.useState(),f=Object(b.a)(m,2),g=f[0],y=f[1],C=function(){p(!1),y(void 0)},k=function(){var e=Object(j.a)(Object(d.a)().mark((function e(t){var n,c,r,s,l;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat(a,"/patients"),t);case 3:n=e.sent,c=n.data,i({type:"ADD_PATIENT",payload:c}),C(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(r=e.t0.response)||void 0===r?void 0:r.data)||"Unknown Error"),y((null===(s=e.t0.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.error)||"Unknown error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(S.jsx)(H.a,{active:!0,inline:"centered"}):Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)(x.a,{textAlign:"center",children:Object(S.jsx)("h3",{children:"Patient list"})}),Object(S.jsxs)(_.a,{celled:!0,children:[Object(S.jsx)(_.a.Header,{children:Object(S.jsxs)(_.a.Row,{children:[Object(S.jsx)(_.a.HeaderCell,{children:"Name"}),Object(S.jsx)(_.a.HeaderCell,{children:"Gender"}),Object(S.jsx)(_.a.HeaderCell,{children:"Occupation"}),Object(S.jsx)(_.a.HeaderCell,{children:"Health Rating"})]})}),Object(S.jsx)(_.a.Body,{children:Object.values(r).map((function(e){return Object(S.jsxs)(_.a.Row,{children:[Object(S.jsx)(_.a.Cell,{children:Object(S.jsx)(O.b,{to:"/patients/".concat(e.id),children:e.name})}),Object(S.jsx)(_.a.Cell,{children:e.gender}),Object(S.jsx)(_.a.Cell,{children:e.occupation}),Object(S.jsx)(_.a.Cell,{children:Object(S.jsx)(G,{showText:!1,rating:1})})]},e.id)}))})]}),Object(S.jsx)(U,{modalOpen:u,onSubmit:k,error:g,onClose:C}),Object(S.jsx)(v.a,{onClick:function(){return p(!0)},children:"Add New Patient"})]})},J=a(96),z=function(e,t){return Object.values(t).filter((function(t){return t.code===e}))[0].name+" "},Q=function(e){var t=e.entry,a=e.diagnoses;return Object(S.jsxs)("div",{className:"ui segment",children:[Object(S.jsxs)("h2",{children:[t.date," ",Object(S.jsx)(J.a,{name:"hospital"})]}),Object(S.jsx)("em",{style:{color:"grey"},children:t.description}),t.diagnosisCodes&&t.diagnosisCodes.length>0&&Object(S.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(S.jsx)("strong",{children:"Diagnoses:"}),Object(S.jsx)("div",{className:"ui bulleted list",children:Object.keys(a).length>0&&t.diagnosisCodes.map((function(e){return Object(S.jsx)("div",{className:"item",children:z(e,a)},e)}))})]}),Object(S.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:"Discharge Date:"}),Object(S.jsxs)("span",{children:[" ",t.discharge.date]})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("strong",{children:"Discharge Criteria:"}),Object(S.jsxs)("span",{children:[" ",t.discharge.criteria]})]})]})]},t.id)},X=function(e){var t=e.entry;return Object(S.jsxs)("div",{className:"ui segment",children:[Object(S.jsxs)("h2",{children:[t.date," ",Object(S.jsx)(J.a,{name:"stethoscope"})]}),Object(S.jsx)("em",{style:{color:"grey"},children:t.description}),Object(S.jsx)("p",{style:{paddingTop:"5px"},children:Object(S.jsx)(J.a,{name:"heart",color:function(){switch(t.healthCheckRating){case r.Healthy:return"green";case r.LowRisk:return"yellow";case r.HighRisk:return"orange";default:return"red"}}()})})]},t.id)},Z=function(e){var t,a,n=e.entry,c=e.diagnoses;return Object(S.jsxs)("div",{className:"ui segment",children:[Object(S.jsxs)("h2",{children:[n.date," ",Object(S.jsx)(J.a,{name:"building"})]}),Object(S.jsx)("em",{style:{color:"grey"},children:n.description}),n.diagnosisCodes&&n.diagnosisCodes.length>0&&Object(S.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(S.jsx)("strong",{children:"Diagnoses:"}),Object(S.jsx)("div",{className:"ui bulleted list",children:Object.keys(c).length>0&&n.diagnosisCodes.map((function(e){return Object(S.jsx)("div",{className:"item",children:z(e,c)},e)}))})]}),(null===(t=n.sickLeave)||void 0===t?void 0:t.startDate)&&Object(S.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(S.jsx)("strong",{children:"Sick leave:"}),Object(S.jsxs)("span",{children:[" ",null===(a=n.sickLeave)||void 0===a?void 0:a.startDate," to ",n.sickLeave.endDate]})]})]},n.id)},$=function(e){var t=e.entry,a=E(),n=Object(b.a)(a,1)[0].diagnoses;switch(t.type){case"Hospital":return Object(S.jsx)(Q,{entry:t,diagnoses:n});case"OccupationalHealthcare":return Object(S.jsx)(Z,{entry:t,diagnoses:n});case"HealthCheck":return Object(S.jsx)(X,{entry:t});default:return null}},ee=[{value:c.Hospital,label:"Hospital"},{value:c.HealthCheck,label:"Health Check"},{value:c.OccupationalHealthcare,label:"Occupational Healthcare"}],te=function(e){return"string"===typeof e||e instanceof String},ae=function(e){var t=e.onSubmit,a=e.onCancel,n=E(),r=Object(b.a)(n,1)[0].diagnoses;return Object(S.jsx)(A.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],discharge:{date:"",criteria:""},sickLeave:{startDate:"",endDate:""},employerName:"",healthCheckRating:0,type:c.Hospital},onSubmit:t,validate:function(e){var t,a="Field is required",n="Formatted incorrectly",r={};return e.description||(r.description=a),e.date||(r.date=a),e.specialist||(r.specialist=a),"string"!==typeof e.description&&(r.description=n),"string"!==typeof e.date&&(r.date=n),"string"!==typeof e.specialist&&(r.specialist=n),e.type!==c.Hospital||e.discharge.date&&e.discharge.criteria||(r.discharge=a),e.type!==c.OccupationalHealthcare||te(e.sickLeave.startDate)&&te(e.sickLeave.endDate)||(r.sickLeave=n),e.type!==c.OccupationalHealthcare||te(e.employerName)||(r.sickLeave=n),e.type===c.HealthCheck&&null===e.healthCheckRating&&(r.healthCheckRating=a),e.type===c.HealthCheck&&(t=e.healthCheckRating,"number"!==typeof Number(t))&&(r.healthCheckRating=n),r},children:function(e){var t=e.isValid,n=e.dirty,i=e.setFieldValue,s=e.setFieldTouched,l=e.values;return Object(S.jsxs)(A.c,{className:"form ui",children:[Object(S.jsx)(F,{label:"Entry Type",name:"type",options:ee}),Object(S.jsx)(A.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:Y}),Object(S.jsx)(A.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:Y}),Object(S.jsx)(A.b,{label:"Description",placeholder:"Description",name:"description",component:Y}),Object(S.jsx)(B,{setFieldValue:i,setFieldTouched:s,diagnoses:Object.values(r)}),l.type===c.Hospital&&Object(S.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(S.jsx)(A.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:Y}),Object(S.jsx)(A.b,{label:"Discharge Criteria",placeholder:"Criteria",name:"discharge.criteria",component:Y})]}),l.type===c.OccupationalHealthcare&&Object(S.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(S.jsx)(A.b,{label:"Sick Leave Start Date",placeholder:"YYYY-MM-DD",name:"sickLeave.startDate",component:Y}),Object(S.jsx)(A.b,{label:"Sick Leave End Date",placeholder:"YYYY-MM-DD",name:"sickLeave.endDate",component:Y}),Object(S.jsx)(A.b,{label:"Employer Name",placeholder:"Employer",name:"employerName",component:Y})]}),l.type===c.HealthCheck&&Object(S.jsx)(A.b,{label:"Health Check Rating",name:"healthCheckRating",component:I,min:0,max:3}),Object(S.jsxs)(w.a,{children:[Object(S.jsx)(w.a.Column,{floated:"left",width:5,children:Object(S.jsx)(v.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(S.jsx)(w.a.Column,{floated:"right",width:5,children:Object(S.jsx)(v.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},ne=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(S.jsxs)(N.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(S.jsx)(N.a.Header,{children:"Add a new Entry"}),Object(S.jsxs)(N.a.Content,{children:[c&&Object(S.jsx)(R.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(S.jsx)(ae,{onSubmit:n,onCancel:a})]})]})},ce=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/patientor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL||"",t=E(),a=Object(b.a)(t,2),n=a[0].patient,c=a[1],r=s.a.useState(!1),i=Object(b.a)(r,2),l=i[0],o=i[1],u=function(){o(!1)},O=Object(p.f)().id;s.a.useEffect((function(){var t=function(){var t=Object(j.a)(Object(d.a)().mark((function t(){var a,n;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("".concat(e,"/patients/").concat(O));case 3:a=t.sent,n=a.data,c(C(n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[c]);var x=function(){var t=Object(j.a)(Object(d.a)().mark((function t(a){var n,r,i;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("".concat(e,"/patients/").concat(O,"/entries"),a);case 3:n=t.sent,r=n.data,c(C(r)),u(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error((null===(i=t.t0.response)||void 0===i?void 0:i.data)||"Unknown Error");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return n?Object(S.jsxs)("div",{className:"Patient-Details",children:[Object(S.jsxs)("h2",{children:[n.name," ",Object(S.jsx)(J.a,{name:function(){switch(null===n||void 0===n?void 0:n.gender){case"male":return"mars";case"female":return"venus";default:return"genderless"}}()})]}),Object(S.jsxs)("p",{children:["ssn: ",n.ssn]}),Object(S.jsxs)("p",{children:["occupation: ",null===n||void 0===n?void 0:n.occupation]}),Object(S.jsx)(v.a,{onClick:function(){return o(!0)},children:"Add New Entry"}),n.entries.length>0&&Object(S.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(S.jsx)("h3",{children:"entries"}),n.entries.map((function(e){return Object(S.jsx)($,{entry:e},e.id)}))]}),Object(S.jsx)(ne,{modalOpen:l,onSubmit:x,onClose:u})]}):null},re=function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"/patientor",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_BACKEND_URL||"",t=E(),a=Object(b.a)(t,2)[1],n=s.a.useState(!1),c=Object(b.a)(n,2),r=c[0],i=c[1];return s.a.useEffect((function(){h.a.get("".concat(e,"/ping"));var t=function(){var t=Object(j.a)(Object(d.a)().mark((function t(){var n,c;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.prev=1,t.next=4,h.a.get("".concat(e,"/patients"));case 4:n=t.sent,c=n.data,a({type:"SET_PATIENT_LIST",payload:c}),i(!1),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(){return t.apply(this,arguments)}}();t()}),[a]),s.a.useEffect((function(){var t=function(){var t=Object(j.a)(Object(d.a)().mark((function t(){var n,c;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("".concat(e,"/diagnoses"));case 3:n=t.sent,c=n.data,a({type:"SET_DIAGNOSES_LIST",payload:c}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[a]),Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(O.a,{children:Object(S.jsxs)(x.a,{children:[Object(S.jsx)(m.a,{as:"h1",children:"Patientor"}),Object(S.jsx)(v.a,{as:O.b,to:"/",primary:!0,children:"Home"}),Object(S.jsx)(f.a,{hidden:!0}),Object(S.jsxs)(p.c,{children:[Object(S.jsx)(p.a,{path:"/patients/:id",children:Object(S.jsx)(ce,{})}),Object(S.jsx)(p.a,{path:"/",children:Object(S.jsx)(q,{isLoading:r})})]})]})})})};o.a.render(Object(S.jsx)(D,{reducer:function(e,t){switch(t.type){case"SET_PATIENT_LIST":return Object(y.a)(Object(y.a)({},e),{},{patients:Object(y.a)(Object(y.a)({},t.payload.reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(g.a)({},t.id,t))}),{})),e.patients)});case"ADD_PATIENT":return Object(y.a)(Object(y.a)({},e),{},{patients:Object(y.a)(Object(y.a)({},e.patients),{},Object(g.a)({},t.payload.id,t.payload))});case"SET_PATIENT":return Object(y.a)(Object(y.a)({},e),{},{patient:t.payload});case"SET_DIAGNOSES_LIST":return Object(y.a)(Object(y.a)({},e),{},{diagnoses:Object(y.a)(Object(y.a)({},t.payload.reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(g.a)({},t.code,t))}),{})),e.diagnoses)});default:return e}},children:Object(S.jsx)(re,{})}),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.1a7cc168.chunk.js.map