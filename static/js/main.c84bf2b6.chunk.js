(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{206:function(e,t,a){"use strict";a.r(t);var n,c,r,i=a(0),s=a.n(i),l=a(68),o=a.n(l),d=(a(179),a(31)),j=a(61),b=a(22),u=a(62),h=a.n(u),p=a(103),O=a(14),x=a(218),m=a(229),v=a(224),f=a(219),g=a(92),y=a(15),k=function(e){return{type:"SET_PATIENT",payload:e}},C=a(2),D={patients:{},patient:null,diagnoses:[]},H=Object(i.createContext)([D,function(){return D}]),S=function(e){var t=e.reducer,a=e.children,n=Object(i.useReducer)(t,D),c=Object(b.a)(n,2),r=c[0],s=c[1];return Object(C.jsx)(H.Provider,{value:[r,s],children:a})},T=function(){return Object(i.useContext)(H)},w=a(217),N=a(223),E=a(222),L=a(227),R=a(226),Y=a(10),A=a(221),F=a(220),I=function(e){var t=e.name,a=e.label,n=e.options;return Object(C.jsxs)(A.a.Field,{children:[Object(C.jsx)("label",{children:a}),Object(C.jsx)(Y.b,{as:"select",name:t,className:"ui dropdown",children:n.map((function(e){return Object(C.jsx)("option",{value:e.value,children:e.label||e.value},e.value)}))})]})},M=function(e){var t=e.field,a=e.label,n=e.placeholder;return Object(C.jsxs)(A.a.Field,{children:[Object(C.jsx)("label",{children:a}),Object(C.jsx)(Y.b,Object(y.a)({placeholder:n},t)),Object(C.jsx)("div",{style:{color:"red"},children:Object(C.jsx)(Y.a,{name:t.name})})]})},_=function(e){var t=e.field,a=e.label,n=e.min,c=e.max;return Object(C.jsxs)(A.a.Field,{children:[Object(C.jsx)("label",{children:a}),Object(C.jsx)(Y.b,Object(y.a)(Object(y.a)({},t),{},{type:"number",min:n,max:c})),Object(C.jsx)("div",{style:{color:"red"},children:Object(C.jsx)(Y.a,{name:t.name})})]})},P=function(e){var t=e.diagnoses,a=e.setFieldValue,n=e.setFieldTouched,c="diagnosisCodes",r=t.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return Object(C.jsxs)(A.a.Field,{children:[Object(C.jsx)("label",{children:"Diagnoses"}),Object(C.jsx)(F.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:r,onChange:function(e,t){n(c,!0),a(c,t.value)}}),Object(C.jsx)(Y.a,{name:c})]})};!function(e){e.Male="male",e.Female="female",e.Other="other"}(n||(n={})),function(e){e.Hospital="Hospital",e.OccupationalHealthcare="OccupationalHealthcare",e.HealthCheck="HealthCheck"}(c||(c={})),function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(r||(r={}));var B=[{value:n.Male,label:"Male"},{value:n.Female,label:"Female"},{value:n.Other,label:"Other"}],V=function(e){var t=e.onSubmit,a=e.onCancel;return Object(C.jsx)(Y.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:n.Other},onSubmit:t,validate:function(e){var t="Field is required",a={};return e.name||(a.name=t),e.ssn||(a.ssn=t),e.dateOfBirth||(a.dateOfBirth=t),e.occupation||(a.occupation=t),a},children:function(e){var t=e.isValid,n=e.dirty;return Object(C.jsxs)(Y.c,{className:"form ui",children:[Object(C.jsx)(Y.b,{label:"Name",placeholder:"Name",name:"name",component:M}),Object(C.jsx)(Y.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:M}),Object(C.jsx)(Y.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:M}),Object(C.jsx)(Y.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:M}),Object(C.jsx)(I,{label:"Gender",name:"gender",options:B}),Object(C.jsxs)(R.a,{children:[Object(C.jsx)(R.a.Column,{floated:"left",width:5,children:Object(C.jsx)(v.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(C.jsx)(R.a.Column,{floated:"right",width:5,children:Object(C.jsx)(v.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},G=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(C.jsxs)(E.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(C.jsx)(E.a.Header,{children:"Add a new patient"}),Object(C.jsxs)(E.a.Content,{children:[c&&Object(C.jsx)(L.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(C.jsx)(V,{onSubmit:n,onCancel:a})]})]})},U=a(228),q=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],J=function(e){var t=e.rating,a=e.showText;return Object(C.jsxs)("div",{className:"health-bar",children:[Object(C.jsx)(U.a,{icon:"heart",disabled:!0,rating:4-t,maxRating:4}),a?Object(C.jsx)("p",{children:q[t]}):null]})},z=function(e){var t=e.isLoading,a=T(),n=Object(b.a)(a,2),c=n[0].patients,r=n[1],i=s.a.useState(!1),l=Object(b.a)(i,2),o=l[0],u=l[1],O=s.a.useState(),m=Object(b.a)(O,2),f=m[0],g=m[1],y=function(){u(!1),g(void 0)},k=function(){var e=Object(j.a)(Object(d.a)().mark((function e(t){var a,n,c,i,s;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.post("".concat("http://localhost:3001/api","/patients"),t);case 3:a=e.sent,n=a.data,r({type:"ADD_PATIENT",payload:n}),y(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error((null===(c=e.t0.response)||void 0===c?void 0:c.data)||"Unknown Error"),g((null===(i=e.t0.response)||void 0===i||null===(s=i.data)||void 0===s?void 0:s.error)||"Unknown error");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return t?Object(C.jsx)(w.a,{active:!0,inline:"centered"}):Object(C.jsxs)("div",{className:"App",children:[Object(C.jsx)(x.a,{textAlign:"center",children:Object(C.jsx)("h3",{children:"Patient list"})}),Object(C.jsxs)(N.a,{celled:!0,children:[Object(C.jsx)(N.a.Header,{children:Object(C.jsxs)(N.a.Row,{children:[Object(C.jsx)(N.a.HeaderCell,{children:"Name"}),Object(C.jsx)(N.a.HeaderCell,{children:"Gender"}),Object(C.jsx)(N.a.HeaderCell,{children:"Occupation"}),Object(C.jsx)(N.a.HeaderCell,{children:"Health Rating"})]})}),Object(C.jsx)(N.a.Body,{children:Object.values(c).map((function(e){return Object(C.jsxs)(N.a.Row,{children:[Object(C.jsx)(N.a.Cell,{children:Object(C.jsx)(p.b,{to:"/patients/".concat(e.id),children:e.name})}),Object(C.jsx)(N.a.Cell,{children:e.gender}),Object(C.jsx)(N.a.Cell,{children:e.occupation}),Object(C.jsx)(N.a.Cell,{children:Object(C.jsx)(J,{showText:!1,rating:1})})]},e.id)}))})]}),Object(C.jsx)(G,{modalOpen:o,onSubmit:k,error:f,onClose:y}),Object(C.jsx)(v.a,{onClick:function(){return u(!0)},children:"Add New Patient"})]})},K=a(96),Q=function(e,t){return Object.values(t).filter((function(t){return t.code===e}))[0].name+" "},W=function(e){var t=e.entry,a=e.diagnoses;return Object(C.jsxs)("div",{className:"ui segment",children:[Object(C.jsxs)("h2",{children:[t.date," ",Object(C.jsx)(K.a,{name:"hospital"})]}),Object(C.jsx)("em",{style:{color:"grey"},children:t.description}),t.diagnosisCodes&&t.diagnosisCodes.length>0&&Object(C.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(C.jsx)("strong",{children:"Diagnoses:"}),Object(C.jsx)("div",{className:"ui bulleted list",children:Object.keys(a).length>0&&t.diagnosisCodes.map((function(e){return Object(C.jsx)("div",{className:"item",children:Q(e,a)},e)}))})]}),Object(C.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{children:"Discharge Date:"}),Object(C.jsxs)("span",{children:[" ",t.discharge.date]})]}),Object(C.jsxs)("div",{children:[Object(C.jsx)("strong",{children:"Discharge Criteria:"}),Object(C.jsxs)("span",{children:[" ",t.discharge.criteria]})]})]})]},t.id)},X=function(e){var t=e.entry;return Object(C.jsxs)("div",{className:"ui segment",children:[Object(C.jsxs)("h2",{children:[t.date," ",Object(C.jsx)(K.a,{name:"stethoscope"})]}),Object(C.jsx)("em",{style:{color:"grey"},children:t.description}),Object(C.jsx)("p",{style:{paddingTop:"5px"},children:Object(C.jsx)(K.a,{name:"heart",color:function(){switch(t.healthCheckRating){case r.Healthy:return"green";case r.LowRisk:return"yellow";case r.HighRisk:return"orange";default:return"red"}}()})})]},t.id)},Z=function(e){var t,a,n=e.entry,c=e.diagnoses;return Object(C.jsxs)("div",{className:"ui segment",children:[Object(C.jsxs)("h2",{children:[n.date," ",Object(C.jsx)(K.a,{name:"building"})]}),Object(C.jsx)("em",{style:{color:"grey"},children:n.description}),n.diagnosisCodes&&n.diagnosisCodes.length>0&&Object(C.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(C.jsx)("strong",{children:"Diagnoses:"}),Object(C.jsx)("div",{className:"ui bulleted list",children:Object.keys(c).length>0&&n.diagnosisCodes.map((function(e){return Object(C.jsx)("div",{className:"item",children:Q(e,c)},e)}))})]}),(null===(t=n.sickLeave)||void 0===t?void 0:t.startDate)&&Object(C.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(C.jsx)("strong",{children:"Sick leave:"}),Object(C.jsxs)("span",{children:[" ",null===(a=n.sickLeave)||void 0===a?void 0:a.startDate," to ",n.sickLeave.endDate]})]})]},n.id)},$=function(e){var t=e.entry,a=T(),n=Object(b.a)(a,1)[0].diagnoses;switch(t.type){case"Hospital":return Object(C.jsx)(W,{entry:t,diagnoses:n});case"OccupationalHealthcare":return Object(C.jsx)(Z,{entry:t,diagnoses:n});case"HealthCheck":return Object(C.jsx)(X,{entry:t});default:return null}},ee=[{value:c.Hospital,label:"Hospital"},{value:c.HealthCheck,label:"Health Check"},{value:c.OccupationalHealthcare,label:"Occupational Healthcare"}],te=function(e){return"string"===typeof e||e instanceof String},ae=function(e){var t=e.onSubmit,a=e.onCancel,n=T(),r=Object(b.a)(n,1)[0].diagnoses;return Object(C.jsx)(Y.d,{initialValues:{description:"",date:"",specialist:"",diagnosisCodes:[],discharge:{date:"",criteria:""},sickLeave:{startDate:"",endDate:""},employerName:"",healthCheckRating:0,type:c.Hospital},onSubmit:t,validate:function(e){var t,a="Field is required",n="Formatted incorrectly",r={};return e.description||(r.description=a),e.date||(r.date=a),e.specialist||(r.specialist=a),"string"!==typeof e.description&&(r.description=n),"string"!==typeof e.date&&(r.date=n),"string"!==typeof e.specialist&&(r.specialist=n),e.type!==c.Hospital||e.discharge.date&&e.discharge.criteria||(r.discharge=a),e.type!==c.OccupationalHealthcare||te(e.sickLeave.startDate)&&te(e.sickLeave.endDate)||(r.sickLeave=n),e.type!==c.OccupationalHealthcare||te(e.employerName)||(r.sickLeave=n),e.type===c.HealthCheck&&null===e.healthCheckRating&&(r.healthCheckRating=a),e.type===c.HealthCheck&&(t=e.healthCheckRating,"number"!==typeof Number(t))&&(r.healthCheckRating=n),r},children:function(e){var t=e.isValid,n=e.dirty,i=e.setFieldValue,s=e.setFieldTouched,l=e.values;return Object(C.jsxs)(Y.c,{className:"form ui",children:[Object(C.jsx)(I,{label:"Entry Type",name:"type",options:ee}),Object(C.jsx)(Y.b,{label:"Date",placeholder:"YYYY-MM-DD",name:"date",component:M}),Object(C.jsx)(Y.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:M}),Object(C.jsx)(Y.b,{label:"Description",placeholder:"Description",name:"description",component:M}),Object(C.jsx)(P,{setFieldValue:i,setFieldTouched:s,diagnoses:Object.values(r)}),l.type===c.Hospital&&Object(C.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(C.jsx)(Y.b,{label:"Discharge Date",placeholder:"YYYY-MM-DD",name:"discharge.date",component:M}),Object(C.jsx)(Y.b,{label:"Discharge Criteria",placeholder:"Criteria",name:"discharge.criteria",component:M})]}),l.type===c.OccupationalHealthcare&&Object(C.jsxs)("div",{style:{paddingBottom:"10px"},children:[Object(C.jsx)(Y.b,{label:"Sick Leave Start Date",placeholder:"YYYY-MM-DD",name:"sickLeave.startDate",component:M}),Object(C.jsx)(Y.b,{label:"Sick Leave End Date",placeholder:"YYYY-MM-DD",name:"sickLeave.endDate",component:M}),Object(C.jsx)(Y.b,{label:"Employer Name",placeholder:"Employer",name:"employerName",component:M})]}),l.type===c.HealthCheck&&Object(C.jsx)(Y.b,{label:"Health Check Rating",name:"healthCheckRating",component:_,min:0,max:3}),Object(C.jsxs)(R.a,{children:[Object(C.jsx)(R.a.Column,{floated:"left",width:5,children:Object(C.jsx)(v.a,{type:"button",onClick:a,color:"red",children:"Cancel"})}),Object(C.jsx)(R.a.Column,{floated:"right",width:5,children:Object(C.jsx)(v.a,{type:"submit",floated:"right",color:"green",disabled:!n||!t,children:"Add"})})]})]})}})},ne=function(e){var t=e.modalOpen,a=e.onClose,n=e.onSubmit,c=e.error;return Object(C.jsxs)(E.a,{open:t,onClose:a,centered:!1,closeIcon:!0,children:[Object(C.jsx)(E.a.Header,{children:"Add a new Entry"}),Object(C.jsxs)(E.a.Content,{children:[c&&Object(C.jsx)(L.a,{inverted:!0,color:"red",children:"Error: ".concat(c)}),Object(C.jsx)(ae,{onSubmit:n,onCancel:a})]})]})},ce=function(){var e="http://localhost:3001/api",t=T(),a=Object(b.a)(t,2),n=a[0].patient,c=a[1],r=s.a.useState(!1),i=Object(b.a)(r,2),l=i[0],o=i[1],u=function(){o(!1)},p=Object(O.f)().id;s.a.useEffect((function(){var t=function(){var t=Object(j.a)(Object(d.a)().mark((function t(){var a,n;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.get("".concat(e,"/patients/").concat(p));case 3:a=t.sent,n=a.data,c(k(n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}),[c]);var x=function(){var t=Object(j.a)(Object(d.a)().mark((function t(a){var n,r,i;return Object(d.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post("".concat(e,"/patients/").concat(p,"/entries"),a);case 3:n=t.sent,r=n.data,c(k(r)),u(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error((null===(i=t.t0.response)||void 0===i?void 0:i.data)||"Unknown Error");case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}();return n?Object(C.jsxs)("div",{className:"Patient-Details",children:[Object(C.jsxs)("h2",{children:[n.name," ",Object(C.jsx)(K.a,{name:function(){switch(null===n||void 0===n?void 0:n.gender){case"male":return"mars";case"female":return"venus";default:return"genderless"}}()})]}),Object(C.jsxs)("p",{children:["ssn: ",n.ssn]}),Object(C.jsxs)("p",{children:["occupation: ",null===n||void 0===n?void 0:n.occupation]}),Object(C.jsx)(v.a,{onClick:function(){return o(!0)},children:"Add New Entry"}),n.entries.length>0&&Object(C.jsxs)("div",{style:{paddingTop:"10px"},children:[Object(C.jsx)("h3",{children:"entries"}),n.entries.map((function(e){return Object(C.jsx)($,{entry:e},e.id)}))]}),Object(C.jsx)(ne,{modalOpen:l,onSubmit:x,onClose:u})]}):null},re=function(){var e=T(),t=Object(b.a)(e,2)[1],a=s.a.useState(!1),n=Object(b.a)(a,2),c=n[0],r=n[1],i="http://localhost:3001/api";return s.a.useEffect((function(){var e=function(){var e=Object(j.a)(Object(d.a)().mark((function e(){var a,n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.prev=1,e.next=4,h.a.get("".concat(i,"/patients"));case 4:a=e.sent,n=a.data,t({type:"SET_PATIENT_LIST",payload:n}),r(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),s.a.useEffect((function(){var e=function(){var e=Object(j.a)(Object(d.a)().mark((function e(){var a,n;return Object(d.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.get("".concat(i,"/diagnoses"));case 3:a=e.sent,n=a.data,t({type:"SET_DIAGNOSES_LIST",payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}),[t]),Object(C.jsx)("div",{className:"App",children:Object(C.jsx)(p.a,{children:Object(C.jsxs)(x.a,{children:[Object(C.jsx)(m.a,{as:"h1",children:"Patientor"}),Object(C.jsx)(v.a,{as:p.b,to:"/",primary:!0,children:"Home"}),Object(C.jsx)(f.a,{hidden:!0}),Object(C.jsxs)(O.c,{children:[Object(C.jsx)(O.a,{path:"/patients/:id",children:Object(C.jsx)(ce,{})}),Object(C.jsx)(O.a,{path:"/",children:Object(C.jsx)(z,{isLoading:c})})]})]})})})};o.a.render(Object(C.jsx)(S,{reducer:function(e,t){switch(t.type){case"SET_PATIENT_LIST":return Object(y.a)(Object(y.a)({},e),{},{patients:Object(y.a)(Object(y.a)({},t.payload.reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(g.a)({},t.id,t))}),{})),e.patients)});case"ADD_PATIENT":return Object(y.a)(Object(y.a)({},e),{},{patients:Object(y.a)(Object(y.a)({},e.patients),{},Object(g.a)({},t.payload.id,t.payload))});case"SET_PATIENT":return Object(y.a)(Object(y.a)({},e),{},{patient:t.payload});case"SET_DIAGNOSES_LIST":return Object(y.a)(Object(y.a)({},e),{},{diagnoses:Object(y.a)(Object(y.a)({},t.payload.reduce((function(e,t){return Object(y.a)(Object(y.a)({},e),{},Object(g.a)({},t.code,t))}),{})),e.diagnoses)});default:return e}},children:Object(C.jsx)(re,{})}),document.getElementById("root"))}},[[206,1,2]]]);
//# sourceMappingURL=main.c84bf2b6.chunk.js.map